/**
 * BottleJS v1.7.0 - 2018-01-29
 * A powerful dependency injection micro container
 *
 * Copyright (c) 2018 Stephen Young
 * Licensed MIT
 */

(function(a){"use strict";var b=".",c="function",d="string",e="__global__",f="Provider",g=0,h=Array.prototype.slice,i=function(b,c){var d=b[c];if(d===a&&O.strict)throw new Error("Bottle was unable to resolve a service.  `"+c+"` is undefined.");return d},j=function(a){var b;return this.nested[a]||(b=N.pop(),this.nested[a]=b,this.factory(a,function(){return b.container})),this.nested[a]},k=function(a){return a.split(b).reduce(i,this)},l=function(a,c){var d=a.split(b);return a=d.pop(),m.call(d.reduce(L,this.container),a,c),this},m=function(a,b){Object.defineProperty(this,a,{configurable:!1,enumerable:!0,value:b,writable:!1})},n=function(a,d){var f,g;return typeof a===c&&(d=a,a=e),f=a.split(b),g=f.shift(),f.length?j.call(this,g).decorator(f.join(b),d):(this.decorators[g]||(this.decorators[g]=[]),this.decorators[g].push(d)),this},o=function(a){return this.deferred.push(a),this},p=function(a){return(a||[]).map(k,this.container)},q=function(a,b){return A.call(this,a,function(){this.$get=b})},r=function(a,b){return q.call(this,a,function(a){return{instance:b.bind(b,a)}})},s=function(a){return!/^\$(?:decorator|register|list)$|Provider$/.test(a)},t=function(a){return Object.keys(a||this.container||{}).filter(s)},u=function(a,b,c,d){var e={configurable:!0,enumerable:!0};return a.length?e.get=function(){var b=0,d=function(e){if(e)throw e;a[b]&&a[b++](c,d)};return d(),c}:(e.value=c,e.writable=!0),Object.defineProperty(d,b,e),d[b]},v=function(a,d){var f,g;return typeof a===c&&(d=a,a=e),f=a.split(b),g=f.shift(),f.length?j.call(this,g).middleware(f.join(b),d):(this.middlewares[g]||(this.middlewares[g]=[]),this.middlewares[g].push(d)),this},w={},x=function(a){var b;return typeof a===d?(b=w[a],b||(w[a]=b=new N,b.constant("BOTTLE_NAME",a)),b):new N},y=function(a){typeof a===d?delete w[a]:w={}},z=function(a,b){return b(a)},A=function(a,c){var d,e;if(d=a.split(b),!this.providerMap[a]||1!==d.length||this.container[a+f])return this.originalProviders[a]=c,this.providerMap[a]=!0,e=d.shift(),d.length?(j.call(this,e).provider(d.join(b),c),this):C.call(this,e,c)},B=function(a,b){return(a[b]||[]).concat(a.__global__||[])},C=function(b,c){var d,e,g,h,i;return this.id,g=this.container,h=this.decorators,i=this.middlewares,d=b+f,e=Object.create(null),e[d]={configurable:!0,enumerable:!0,get:function(){var a=new c;return delete g[d],g[d]=a,a}},e[b]={configurable:!0,enumerable:!0,get:function(){var c,e=g[d];return e&&(c=B(h,b).reduce(z,e.$get(g)),delete g[d],delete g[b]),c===a?c:u(B(i,b),b,c,g)}},Object.defineProperties(g,e),this},D=function(b){var c=b.$value===a?b:b.$value;return this[b.$type||"service"].apply(this,[b.$name,c].concat(b.$inject||[]))},E=function(a){delete this.providerMap[a],delete this.container[a],delete this.container[a+f]},F=function(){var a=this.originalProviders;Object.keys(this.originalProviders).forEach(function(c){var d=c.split(b);d.length>1&&d.forEach(E,j.call(this,d[0])),E.call(this,c),this.provider(c,a[c])},this)},G=function(a){return this.deferred.forEach(function(b){b(a)}),this},H=function(a,b){return J.apply(this,[a,b,!1].concat(h.call(arguments,2)))},I=function(a,b){return J.apply(this,[a,b,!0].concat(h.call(arguments,2)))},J=function(a,b,c){var d=arguments.length>3?h.call(arguments,3):[],e=this;return q.call(this,a,function(){var a=b,f=d.map(k,e.container);return c?new(b.bind.apply(b,[null].concat(f))):a.apply(null,f)})},K=function(a,c){var d;return d=a.split(b),a=d.pop(),M.call(d.reduce(L,this.container),a,c),this},L=function(a,b){var c=a[b];return c||(c={},M.call(a,b,c)),c},M=function(a,b){Object.defineProperty(this,a,{configurable:!0,enumerable:!0,value:b,writable:!0})},N=function a(b){if(!(this instanceof a))return a.pop(b);this.id=g++,this.decorators={},this.middlewares={},this.nested={},this.providerMap={},this.originalProviders={},this.deferred=[],this.container={$decorator:n.bind(this),$register:D.bind(this),$list:t.bind(this)}};N.prototype={constant:l,decorator:n,defer:o,digest:p,factory:q,instanceFactory:r,list:t,middleware:v,provider:A,resetProviders:F,register:D,resolve:G,service:I,serviceFactory:H,value:K},N.pop=x,N.clear=y,N.list=t;var O=N.config={strict:!1},P={function:!0,object:!0};!function(a){var b=P[typeof exports]&&exports&&!exports.nodeType&&exports,d=P[typeof module]&&module&&!module.nodeType&&module,e=d&&d.exports===b&&b,f=P[typeof global]&&global;!f||f.global!==f&&f.window!==f||(a=f),typeof define===c&&"object"==typeof define.amd&&define.amd?(a.Bottle=N,define(function(){return N})):b&&d?e?(d.exports=N).Bottle=N:b.Bottle=N:a.Bottle=N}(P[typeof window]&&window||this)}).call(this);
//# sourceMappingURL=bottle.min.js.map